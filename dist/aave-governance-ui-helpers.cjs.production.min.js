"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,r,a,n,o,i,s,c,u,d,p=require("@bgd-labs/aave-address-book"),l=require("bignumber.js"),f=require("ethers"),m=e(require("dayjs")),h=require("ethers/lib/utils"),v=e(require("gray-matter"));(t=exports.ChainIdByName||(exports.ChainIdByName={}))[t.EthereumMainnet=1]="EthereumMainnet",t[t.Polygon=137]="Polygon",t[t.Avalanche=43114]="Avalanche",t[t.Binance=56]="Binance",t[t.Base=8453]="Base",t[t.Arbitrum=42161]="Arbitrum",t[t.Metis=1088]="Metis",t[t.Optimism=10]="Optimism",t[t.Goerli=5]="Goerli",t[t.GoerliOptimism=420]="GoerliOptimism",t[t.AvalancheFuji=43113]="AvalancheFuji",t[t.Sepolia=11155111]="Sepolia",t[t.Mumbai=80001]="Mumbai",t[t.BnbTest=97]="BnbTest";var x,g,y,b,A,P,E,C={mainnet:{contractAddress:p.GovernanceV3Ethereum.GOVERNANCE,dataHelperContractAddress:p.GovernanceV3Ethereum.GOV_DATA_HELPER,votingPortals:(r={},r[exports.ChainIdByName.EthereumMainnet]=p.GovernanceV3Ethereum.VOTING_PORTAL_ETH_ETH,r[exports.ChainIdByName.Polygon]=p.GovernanceV3Ethereum.VOTING_PORTAL_ETH_POL,r[exports.ChainIdByName.Avalanche]=p.GovernanceV3Ethereum.VOTING_PORTAL_ETH_AVAX,r)},goerli:{contractAddress:"0x586207Df62c7D5D1c9dBb8F61EdF77cc30925C4F",dataHelperContractAddress:"0xB84D6c8b2cFC98191a1D6d00B38c1057252d876b",votingPortals:(a={},a[exports.ChainIdByName.Goerli]="0xFf376b6db4AF0d87Dba35860B3B87F526d7879cF",a)},sepolia:{contractAddress:"0xc4ABF658C3Dda84225cF8A07d7D5Bb6Aa41d9E59",dataHelperContractAddress:"0x863f9De2f82AB502612E8B7d4f4863c8535cb8cA",votingPortals:(n={},n[exports.ChainIdByName.Sepolia]="0x1079bAa48E56065d43b4344866B187a485cb0A92",n[exports.ChainIdByName.AvalancheFuji]="0x4f47EdF2577995aBd7B875Eed75b3F28a20E696F",n)}},N={mainnet:(o={},o[exports.ChainIdByName.EthereumMainnet]={dataHelperContractAddress:p.GovernanceV3Ethereum.PC_DATA_HELPER,contractAddresses:[p.GovernanceV3Ethereum.PAYLOADS_CONTROLLER]},o[exports.ChainIdByName.Polygon]={dataHelperContractAddress:p.GovernanceV3Polygon.PC_DATA_HELPER,contractAddresses:[p.GovernanceV3Polygon.PAYLOADS_CONTROLLER]},o[exports.ChainIdByName.Avalanche]={dataHelperContractAddress:p.GovernanceV3Avalanche.PC_DATA_HELPER,contractAddresses:[p.GovernanceV3Avalanche.PAYLOADS_CONTROLLER]},o[exports.ChainIdByName.Base]={dataHelperContractAddress:p.GovernanceV3Base.PC_DATA_HELPER,contractAddresses:[p.GovernanceV3Base.PAYLOADS_CONTROLLER]},o[exports.ChainIdByName.Arbitrum]={dataHelperContractAddress:p.GovernanceV3Arbitrum.PC_DATA_HELPER,contractAddresses:[p.GovernanceV3Arbitrum.PAYLOADS_CONTROLLER]},o[exports.ChainIdByName.Metis]={dataHelperContractAddress:p.GovernanceV3Metis.PC_DATA_HELPER,contractAddresses:[p.GovernanceV3Metis.PAYLOADS_CONTROLLER]},o[exports.ChainIdByName.Optimism]={dataHelperContractAddress:p.GovernanceV3Optimism.PC_DATA_HELPER,contractAddresses:[p.GovernanceV3Optimism.PAYLOADS_CONTROLLER]},o),goerli:(i={},i[exports.ChainIdByName.Goerli]={dataHelperContractAddress:"0xbd2db358f3C82F2883132A6584e22F38A979e768",contractAddresses:["0x064361B3761CcDd17300146bf58a79d1E570382E"],payloadAddress:"0xf6b9c3fCF7f91817E7bF0efF792BA692c7bd372A"},i),sepolia:(s={},s[exports.ChainIdByName.Sepolia]={dataHelperContractAddress:"0x6B9AF21B95FE20b5a878b43670c23124841ec31A",contractAddresses:["0x7E314a46AA6dF79c51869967B9b8e9f8Bb20781d"],payloadAddress:"0xf19de078dbac9db382caf8015cb208667ec581c0"},s[exports.ChainIdByName.AvalancheFuji]={dataHelperContractAddress:"0x6B9AF21B95FE20b5a878b43670c23124841ec31A",contractAddresses:["0x1fad4eac642D8CAFb7fC5d38973D1C2764202da5"],payloadAddress:"0xdf9f39247c553485ac3bf974418947d9b2f969e5"},s)},S={mainnet:(c={},c[exports.ChainIdByName.EthereumMainnet]={contractAddress:p.GovernanceV3Ethereum.VOTING_MACHINE,dataHelperContractAddress:p.GovernanceV3Ethereum.VM_DATA_HELPER,dataWarehouseAddress:p.GovernanceV3Ethereum.DATA_WAREHOUSE},c[exports.ChainIdByName.Polygon]={contractAddress:p.GovernanceV3Polygon.VOTING_MACHINE,dataHelperContractAddress:p.GovernanceV3Polygon.VM_DATA_HELPER,dataWarehouseAddress:p.GovernanceV3Polygon.DATA_WAREHOUSE},c[exports.ChainIdByName.Avalanche]={contractAddress:p.GovernanceV3Avalanche.VOTING_MACHINE,dataHelperContractAddress:p.GovernanceV3Avalanche.VM_DATA_HELPER,dataWarehouseAddress:p.GovernanceV3Avalanche.DATA_WAREHOUSE},c),goerli:(u={},u[exports.ChainIdByName.Goerli]={contractAddress:"0xE8AD5ab6295c16D04257BC6Cd6D447ff4018FF89",dataHelperContractAddress:"0xe10617A1ea760E174E82fBeb38a540d8ACe566f5",dataWarehouseAddress:"0xC946cc6bb934bAf2A539BaB62c647aff09D2e2D8"},u),sepolia:(d={},d[exports.ChainIdByName.Sepolia]={contractAddress:"0xA1995F1d5A8A247c064a76F336E1C2ecD24Ef0D9",dataHelperContractAddress:"0x133210F3fe2deEB34e65deB6861ee3dF87393977",dataWarehouseAddress:"0xACd2b1bA0B85FaF0f45D4974Ba8ee538E157fBc6"},d[exports.ChainIdByName.AvalancheFuji]={contractAddress:"0x767AA57554690D23D1E0594E8746271C97e1A1e4",dataHelperContractAddress:"0x133210F3fe2deEB34e65deB6861ee3dF87393977",dataWarehouseAddress:"0x2F4bc3128D0D52ef954552FfEC28BC523462dc02"},d)},B={mainnet:exports.ChainIdByName.EthereumMainnet,goerli:exports.ChainIdByName.Goerli,sepolia:exports.ChainIdByName.Sepolia},D={mainnet:{aaveAddress:p.AaveV3Ethereum.ASSETS.AAVE.UNDERLYING,aAaveAddress:p.AaveV3Ethereum.ASSETS.AAVE.A_TOKEN,stkAAVEAddress:p.AaveSafetyModule.STK_AAVE,delegationHelper:p.GovernanceV3Ethereum.META_DELEGATE_HELPER},goerli:{aaveAddress:"0xb6D88BfC5b145a558b279cf7692e6F02064889d0",aAaveAddress:"0xD1ff82609FB63A0eee6FE7D2896d80d29491cCCd",stkAAVEAddress:"0x1406A9Ea2B0ec8FD4bCa4F876DAae2a70a9856Ec",delegationHelper:"0x1966133c190475E8385Dc1b4150B5f81c70DC578"},sepolia:{aaveAddress:"0xdaEcee477B931b209e8123401EA37582ACB3811d",aAaveAddress:"0x26aAB2aE39897338c2d91491C46c14a8c2a67919",stkAAVEAddress:"0x354032B31339853A3D682613749F183328d07275",delegationHelper:"0x7cc468E937ec7B06A2816B33AC159BC1273dF4A3"}},w={mainnet:[exports.ChainIdByName.EthereumMainnet,exports.ChainIdByName.Polygon,exports.ChainIdByName.Avalanche,exports.ChainIdByName.Base,exports.ChainIdByName.Arbitrum,exports.ChainIdByName.Metis,exports.ChainIdByName.Optimism],goerli:[exports.ChainIdByName.Goerli],sepolia:[exports.ChainIdByName.Sepolia,exports.ChainIdByName.AvalancheFuji]},V={mainnet:[exports.ChainIdByName.EthereumMainnet,exports.ChainIdByName.Polygon,exports.ChainIdByName.Avalanche],goerli:[exports.ChainIdByName.Goerli],sepolia:[exports.ChainIdByName.Sepolia,exports.ChainIdByName.AvalancheFuji]},T={testnet:"qGvvlJMoyDKyuMxqJjDwFslpgiBKZCXNXpnSjIxsICY_",mainnet:""};function k(e){return e instanceof l.BigNumber?e:new l.BigNumber(e)}function F(e,t){return k(e).shiftedBy(-1*t)}function I(e){return{notZero:e!==f.ethers.constants.HashZero,zero:e===f.ethers.constants.HashZero}}function M(){M=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=Object.create((t&&t.prototype instanceof l?t:l).prototype),i=new N(n||[]);return a(o,"_invoke",{value:A(e,r,i)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function l(){}function f(){}function m(){}var h={};c(h,o,(function(){return this}));var v=Object.getPrototypeOf,x=v&&v(v(S([])));x&&x!==t&&r.call(x,o)&&(h=x);var g=m.prototype=l.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;a(this,"_invoke",{value:function(a,o){function i(){return new t((function(n,i){!function a(n,o,i,s){var c=d(e[n],e,o);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(p).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,s)}))}s(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}})}function A(e,t,r){var a="suspendedStart";return function(n,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw o;return{value:void 0,done:!0}}for(r.method=n,r.arg=o;;){var i=r.delegate;if(i){var s=P(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===a)throw a="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a="executing";var c=d(e,t,r);if("normal"===c.type){if(a=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a="completed",r.method="throw",r.arg=c.arg)}}}function P(e,t){var r=t.method,a=e.iterator[r];if(void 0===a)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var n=d(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(r.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:B}}function B(){return{value:void 0,done:!0}}return f.prototype=m,a(g,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,a,n,o){void 0===o&&(o=Promise);var i=new b(u(t,r,a,n),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var a in t)r.push(a);return r.reverse(),function e(){for(;r.length;){var a=r.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=S,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(r,a){return i.type="throw",i.arg=e,t.next=r,a&&(t.method="next",t.arg=void 0),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var n=a.arg;C(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function H(e,t,r,a,n,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(a,n)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){H(o,a,n,i,s,"next",e)}function s(e){H(o,a,n,i,s,"throw",e)}i(void 0)}))}}function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function O(e,t,r,a){return _.apply(this,arguments)}function _(){return(_=L(M().mark((function e(t,r,a,n){var o,i,s;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=Math.ceil((r-t)/a),i=new Array(o),s=0;s<o;s++)i[s]=s;return e.next=5,Promise.all(i.map(function(){var e=L(M().mark((function e(o){var i,s;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t+a*o,s=t+(a*o+a),e.next=4,n(i,r>s?s:r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent.flat());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return{forVotes:F(e,18).toNumber(),againstVotes:F(t,18).toNumber()}}function R(e,t,r){var a=k(t).multipliedBy(r),n=F(a,18).toNumber(),o=!1;return k(e).gte(a)&&(o=!0),{minQuorumVotes:a,normalizeMinQuorumVotes:n,quorumReached:o}}function W(e,t,r,a){var n=k(e).minus(t),o=k(r).multipliedBy(a);return{diff:n,requiredDiff:o,normalizeRequiredDiff:F(o,18).toNumber()}}function j(e){var t=e.proposalData,r=e.quorum,a=e.differential,n=e.precisionDivider,o=e.cooldownPeriod,i=e.executionPayloadTime,s=m().unix(),c=t.votingMachineState>exports.VotingMachineProposalState.NotCreated,u=t.votingMachineData.endTime>0&&s>t.votingMachineData.endTime,d=t.votingMachineData.votingClosedAndSentTimestamp>0&&s>t.votingMachineData.votingClosedAndSentTimestamp,p=q(t.votingMachineData.forVotes,t.votingMachineData.againstVotes),l=p.forVotes,f=p.againstVotes,h=R(t.votingMachineData.forVotes,r,n),v=h.normalizeMinQuorumVotes,x=h.quorumReached,g=W(t.votingMachineData.forVotes,t.votingMachineData.againstVotes,a,n).normalizeRequiredDiff,y=Math.max.apply(null,t.payloads.map((function(e){return(null==e?void 0:e.queuedAt)||0}))),b=Math.max.apply(null,t.payloads.map((function(e){return(null==e?void 0:e.executedAt)||0}))),A=Math.max.apply(null,t.payloads.map((function(e){return(null==e?void 0:e.cancelledAt)||0}))),P=Math.max.apply(null,t.payloads.map((function(e){return e.queuedAt<=0&&e.state===exports.PayloadState.Expired?e.expirationTime:e.queuedAt>0&&e.state===exports.PayloadState.Expired?e.queuedAt+e.delay+e.gracePeriod:0}))),E=Math.max.apply(null,t.payloads.map((function(e){return null!=e&&e.state&&e.state===exports.PayloadState.Created?e.expirationTime:null!=e&&e.state&&e.state===exports.PayloadState.Queued?e.queuedAt+e.delay+e.gracePeriod:0}))),C=t.payloads.every((function(e){return(null==e?void 0:e.state)&&e.state===exports.PayloadState.Executed})),N=t.payloads.every((function(e){return(null==e?void 0:e.state)&&e.state===exports.PayloadState.Cancelled})),S=t.payloads.every((function(e){return(null==e?void 0:e.state)&&e.state===exports.PayloadState.Expired})),B=t.basicState===exports.BasicProposalState.Cancelled||N,D=t.basicState===exports.BasicProposalState.Expired||S,w=u&&(f>=l||0===f&&0===l),V=u&&d&&!w&&t.basicState===exports.BasicProposalState.Executed&&!B,T=u&&d&&!w&&t.basicState===exports.BasicProposalState.Executed&&!B&&C&&!D,k=!0;return(t.basicState===exports.BasicProposalState.Null||t.basicState===exports.BasicProposalState.Created||B||w||T||D)&&(k=!1),{forVotes:l,againstVotes:f,normalizeMinQuorumVotes:v,quorumReached:x,normalizeRequiredDiff:g,isVotingStarted:c,isVotingActive:c&&!u&&!B,isVotingEnded:u,isVotingClosed:d,isVotingFailed:w,lastPayloadQueuedAt:y,lastPayloadCanceledAt:A,lastPayloadExecutedAt:b,lastPayloadExpiredAt:P,predictPayloadExpiredTime:E,allPayloadsExecuted:C,allPayloadsCanceled:N,allPayloadsExpired:S,isCanceled:B,isExpired:D,isProposalActive:k,isProposalQueued:c&&u&&d&&t.votingMachineData.sentToGovernance&&t.queuingTime>0&&s>t.queuingTime+o,isProposalExecuted:V,isPayloadsQueued:V&&s>y+i,isPayloadsExecuted:T}}function Q(e,t,r){var a=m().unix(),n=j({proposalData:e.data,quorum:e.config.quorum,differential:e.config.differential,precisionDivider:e.precisionDivider,cooldownPeriod:e.timings.cooldownPeriod,executionPayloadTime:e.timings.executionPayloadTime}),o=n.isVotingStarted,i=n.isVotingEnded,s=n.isVotingClosed,c=n.lastPayloadQueuedAt,u=n.predictPayloadExpiredTime,d=q(t,r),p=d.forVotes,l=d.againstVotes,f=R(t,e.config.quorum,e.precisionDivider).quorumReached,h=W(t,r,e.config.differential,e.precisionDivider),v=l>=p||0===l&&0===p||!f,x=e.data.basicState===exports.BasicProposalState.Executed&&a<c+e.timings.executionPayloadTime,g=e.data.queuingTime>0&&0===c?e.data.queuingTime+e.timings.cooldownPeriod:e.data.queuingTime>0&&c>0?c+e.timings.executionPayloadTime:0;return a<=e.data.creationTime+e.config.coolDownBeforeVotingStart?{estimatedState:exports.ProposalEstimatedState.Active,timestampForEstimatedState:e.data.creationTime+e.config.coolDownBeforeVotingStart}:o&&!i&&p>l+h.normalizeRequiredDiff&&f?{estimatedState:exports.ProposalEstimatedState.Succeed,timestampForEstimatedState:e.data.votingMachineData.endTime}:v&&o&&!i?{estimatedState:exports.ProposalEstimatedState.Defeated,timestampForEstimatedState:e.data.votingMachineData.endTime}:o&&i&&s&&!v&&e.data.votingMachineData.sentToGovernance&&e.data.queuingTime>0&&a<e.data.queuingTime+e.timings.cooldownPeriod&&!x?{estimatedState:exports.ProposalEstimatedState.ProposalExecuted,timestampForEstimatedState:g}:x?{estimatedState:exports.ProposalEstimatedState.PayloadsExecuted,timestampForEstimatedState:g}:{estimatedState:exports.ProposalEstimatedState.Expired,timestampForEstimatedState:e.data.basicState===exports.BasicProposalState.Executed?u:e.data.creationTime+e.timings.expirationTime}}function z(e){var t=m().unix(),r=j({proposalData:e.data,quorum:e.config.quorum,differential:e.config.differential,precisionDivider:e.precisionDivider,cooldownPeriod:e.timings.cooldownPeriod,executionPayloadTime:e.timings.executionPayloadTime}),a=r.isVotingStarted,n=r.isVotingEnded,o=r.isVotingClosed;return r.isVotingFailed?void 0:t>e.data.creationTime+e.config.coolDownBeforeVotingStart&&!a&&!n&&!o?exports.ProposalWaitForState.WaitForActivateVoting:a&&n&&!o?exports.ProposalWaitForState.WaitForCloseVoting:a&&n&&o&&e.data.votingMachineData.sentToGovernance&&e.data.queuingTime<=0?exports.ProposalWaitForState.WaitForQueueProposal:r.isProposalQueued&&e.data.basicState!==exports.BasicProposalState.Executed?exports.ProposalWaitForState.WaitForExecuteProposal:r.isProposalExecuted&&0===r.lastPayloadQueuedAt?exports.ProposalWaitForState.WaitForQueuePayloads:r.isPayloadsQueued?exports.ProposalWaitForState.WaitForExecutePayloads:void 0}(x=exports.BasicProposalState||(exports.BasicProposalState={}))[x.Null=0]="Null",x[x.Created=1]="Created",x[x.Active=2]="Active",x[x.Queued=3]="Queued",x[x.Executed=4]="Executed",x[x.Failed=5]="Failed",x[x.Cancelled=6]="Cancelled",x[x.Expired=7]="Expired",(g=exports.VotingMachineProposalState||(exports.VotingMachineProposalState={}))[g.NotCreated=0]="NotCreated",g[g.Active=1]="Active",g[g.Finished=2]="Finished",g[g.SentToGovernance=3]="SentToGovernance",(y=exports.PayloadState||(exports.PayloadState={}))[y.None=0]="None",y[y.Created=1]="Created",y[y.Queued=2]="Queued",y[y.Executed=3]="Executed",y[y.Cancelled=4]="Cancelled",y[y.Expired=5]="Expired",(b=exports.ProposalState||(exports.ProposalState={}))[b.Created=0]="Created",b[b.Active=1]="Active",b[b.Succeed=2]="Succeed",b[b.Defeated=3]="Defeated",b[b.Executed=4]="Executed",b[b.Expired=5]="Expired",b[b.Canceled=6]="Canceled",(A=exports.ProposalStateWithName||(exports.ProposalStateWithName={})).Created="Created",A.Active="Voting",A.Succeed="Passed",A.Failed="Failed",A.Defeated="Failed",A.Executed="Executed",A.Expired="Expired",A.Canceled="Canceled",A.ActiveAll="Active",(P=exports.ProposalEstimatedState||(exports.ProposalEstimatedState={})).Active="Will open for voting",P.Succeed="Will pass",P.Defeated="Will fail",P.ProposalExecuted="Proposal will be executed",P.PayloadsExecuted="Payloads will start being executed",P.Expired="Will expire",(E=exports.ProposalWaitForState||(exports.ProposalWaitForState={})).WaitForActivateVoting="Pending voting activation",E.WaitForCloseVoting="Pending voting closure",E.WaitForQueueProposal="Proposal is time-locked",E.WaitForExecuteProposal="Pending proposal execution",E.WaitForQueuePayloads="Payloads are time-locked",E.WaitForExecutePayloads="Pending payloads execution";var Y=function(e){switch(e){case exports.ChainIdByName.EthereumMainnet:return 13;case exports.ChainIdByName.Polygon:return 3;case exports.ChainIdByName.Avalanche:return 5;case exports.ChainIdByName.Binance:return 4;case exports.ChainIdByName.Base:return 2;case exports.ChainIdByName.Arbitrum:return 1;case exports.ChainIdByName.Metis:case exports.ChainIdByName.Optimism:return 2;case exports.ChainIdByName.Sepolia:case exports.ChainIdByName.Goerli:return 13;case exports.ChainIdByName.GoerliOptimism:return 2;case exports.ChainIdByName.AvalancheFuji:return 5;case exports.ChainIdByName.Mumbai:return 3;case exports.ChainIdByName.BnbTest:return 4;default:return 13}};function Z(){return(Z=L(M().mark((function e(t,r,a){var n,o,i,s,c,u,d,p,l,f,m;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=100,o=10,i=0,s=Y(t),e.next=6,a.getBlock("latest");case 6:if(!(r>(c=e.sent).timestamp)){e.next=9;break}throw new Error("Target timestamp is in the future.");case 9:u=c.timestamp,d=c.number;case 11:if(!((p=u>=r?d-Math.floor((u-r)/s):d+Math.floor((u-r)/s))<0)){e.next=14;break}throw new Error("Estimated block number is below zero.");case 14:return e.next=16,a.getBlock(p);case 16:l=e.sent,s=Math.ceil((l.timestamp-u)/(p-d)),u=l.timestamp,d=l.number,i++;case 21:if(Math.abs(l.timestamp-r)>n*s&&i<o){e.next=11;break}case 22:if(i!==o){e.next=24;break}throw new Error("Maximum iterations reached without converging.");case 24:return f=l.number-1,m=l.number+2*n,l.timestamp>r&&(f=l.number-2*n,m=l.number),e.abrupt("return",{minBlockNumber:f,maxBlockNumber:m});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=L(M().mark((function e(t,r){var a,n,o,i,s,c,u;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[1,2],e.next=3,t.getConstants(r,a);case 3:for(o={precisionDivider:(n=e.sent).precisionDivider.toString(),cooldownPeriod:n.cooldownPeriod.toNumber(),expirationTime:n.expirationTime.toNumber(),cancellationFee:n.cancellationFee.toString()},i=[],s=0;s<a.length;s++)u={accessLevel:(c=n.votingConfigs[s]).accessLevel,votingDuration:c.config.votingDuration,quorum:c.config.yesThreshold.toNumber()||200,differential:c.config.yesNoDifferential.toNumber()||50,coolDownBeforeVotingStart:c.config.coolDownBeforeVotingStart,minPropositionPower:c.config.minPropositionPower.toNumber()},i.push(u);return e.abrupt("return",{contractsConstants:o,configs:i});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t,r,a,n){return X.apply(this,arguments)}function X(){return(X=L(M().mark((function e(t,r,a,n,o){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryFilter(a.filters.PayloadCreated(),t,r);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{payloadId:e.args.payloadId,chainId:o,transactionHash:e.transactionHash,blockNumber:e.blockNumber,payloadsController:n}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=L(M().mark((function e(t,r,a,n,o){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,r,1023,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t,r,a,n,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,r){return ee.apply(this,arguments)}function ee(){return(ee=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryFilter(a.filters.ProposalCreated(),t,r);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{proposalId:e.args.proposalId.toNumber(),transactionHash:e.transactionHash,blockNumber:e.blockNumber}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,r,1023,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,r){return ae.apply(this,arguments)}function ae(){return(ae=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryFilter(a.filters.VotingActivated(),t,r);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{proposalId:e.args.proposalId.toNumber(),transactionHash:e.transactionHash,blockNumber:e.blockNumber}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,r,1023,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t,r){return ie.apply(this,arguments)}function ie(){return(ie=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryFilter(a.filters.ProposalVoteStarted(),t,r);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{proposalId:e.args.proposalId.toNumber(),transactionHash:e.transactionHash,blockNumber:e.blockNumber}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,r,1023,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t,r){return ue.apply(this,arguments)}function ue(){return(ue=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryFilter(a.filters.ProposalResultsSent(),t,r);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{proposalId:e.args.proposalId.toNumber(),transactionHash:e.transactionHash,blockNumber:e.blockNumber}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,r,1023,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t,r){return le.apply(this,arguments)}function le(){return(le=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryFilter(a.filters.ProposalQueued(),t,r);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{proposalId:e.args.proposalId.toNumber(),transactionHash:e.transactionHash,blockNumber:e.blockNumber}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=L(M().mark((function e(t,r,a){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,r,1023,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,r,a,n){return he.apply(this,arguments)}function he(){return(he=L(M().mark((function e(t,r,a,n,o){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryFilter(a.filters.PayloadQueued(),t,r);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{payloadId:e.args.payloadId,chainId:o,transactionHash:e.transactionHash,blockNumber:e.blockNumber,payloadsController:n}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return(ve=L(M().mark((function e(t,r,a,n,o){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,r,1023,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t,r,a,n,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t,r,a,n){return ge.apply(this,arguments)}function ge(){return(ge=L(M().mark((function e(t,r,a,n,o){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryFilter(a.filters.PayloadExecuted(),t,r);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{payloadId:e.args.payloadId,chainId:o,transactionHash:e.transactionHash,blockNumber:e.blockNumber,payloadsController:n}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=L(M().mark((function e(t,r,a,n,o){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,r,1023,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(t,r,a,n,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t){return{id:e,forVotes:t.proposalData.forVotes.toString(),againstVotes:t.proposalData.againstVotes.toString(),startTime:t.proposalData.startTime,endTime:t.proposalData.endTime,votingClosedAndSentBlockNumber:t.proposalData.votingClosedAndSentBlockNumber.toNumber(),votingClosedAndSentTimestamp:t.proposalData.votingClosedAndSentTimestamp,l1BlockHash:(null==t?void 0:t.voteConfig.l1ProposalBlockHash)||f.ethers.constants.HashZero,strategy:t.strategy,sentToGovernance:t.proposalData.sentToGovernance,createdBlock:t.proposalData.creationBlockNumber.toNumber(),votedInfo:{support:t.votedInfo.support,votingPower:t.votedInfo.votingPower.toString()},votingAssets:t.votingAssets,hasRequiredRoots:t.hasRequiredRoots}}function Ae(e,t,r,a){return Pe.apply(this,arguments)}function Pe(){return(Pe=L(M().mark((function e(t,r,a,n){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.queryFilter(t.filters.VoteEmitted(),r,a);case 2:return e.abrupt("return",e.sent.sort((function(e,t){return t.blockNumber-e.blockNumber})).map((function(e){return{proposalId:e.args.proposalId.toNumber(),address:e.args.voter.toString(),support:e.args.support,votingPower:F(e.args.votingPower.toString(),18).toNumber(),transactionHash:e.transactionHash,blockNumber:e.blockNumber,chainId:n}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return(Ee=L(M().mark((function e(t,r,a,n,o){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(r,t,a,function(){var e=L(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(n,t,r,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return t+"/"+e}var Ne={},Se=["0x0000000000000000000000000000000000000000000000000000000000000020",f.ethers.constants.HashZero];function Be(){return(Be=L(M().mark((function e(t,r,a,n){var o,i,s,c,u,d,p;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r="https://ipfs.io/ipfs"),o=t.startsWith("0x")?h.base58.encode(Buffer.from("1220"+t.slice(2),"hex")):t,!Ne[o]){e.next=4;break}return e.abrupt("return",Ne[o]);case 4:if(!Se.some((function(e){return t===e}))){e.next=12;break}if(!a){e.next=9;break}a(t,n),e.next=10;break;case 9:throw Error("Fetch metadata form ipfs not working");case 10:e.next=37;break;case 12:return e.next=14,fetch(Ce(o,r));case 14:if((i=e.sent).ok){e.next=21;break}if(!a){e.next=20;break}a(t),e.next=21;break;case 20:throw Error("Fetch metadata form ipfs not working");case 21:return s=i.clone(),e.prev=22,e.next=25,i.json();case 25:u=v((c=e.sent).description),Ne[o]={title:c.title,aip:c.aip,originalIpfsHash:t,author:c.author,discussions:c.discussions,shortDescription:c.shortDescription,ipfsHash:o,description:u.content},e.next=37;break;case 30:return e.prev=30,e.t0=e.catch(22),e.next=34,s.text();case 34:d=v(e.sent),Ne[o]={title:(p=d.data).title,aip:p.aip,originalIpfsHash:t,author:p.author,discussions:p.discussions,shortDescription:p.shortDescription,ipfsHash:o,description:d.content};case 37:return e.abrupt("return",Ne[o]);case 38:case"end":return e.stop()}}),e,null,[[22,30]])})))).apply(this,arguments)}exports.appConfigInit=function(e,t){return{providers:e,govCoreChainId:B[t],govCoreConfig:C[t],votingMachineConfig:S[t],votingMachineChainIds:V[t],payloadsControllerConfig:N[t],payloadsControllerChainIds:w[t],additional:D[t],gelatoApiKeys:T}},exports.blockLimit=1023,exports.checkHash=I,exports.formatDiff=W,exports.formatProposal=function(e){var t=j({proposalData:e.data,quorum:e.config.quorum,differential:e.config.differential,precisionDivider:e.precisionDivider,cooldownPeriod:e.timings.cooldownPeriod,executionPayloadTime:e.timings.executionPayloadTime}),r=t.forVotes,a=t.normalizeMinQuorumVotes,n=t.againstVotes,o=t.normalizeRequiredDiff,i=function(e){var t=j({proposalData:e.data,quorum:e.config.quorum,differential:e.config.differential,precisionDivider:e.precisionDivider,cooldownPeriod:e.timings.cooldownPeriod,executionPayloadTime:e.timings.executionPayloadTime}),r=t.isVotingEnded,a=t.isVotingStarted,n=t.isExpired,o=t.lastPayloadExecutedAt,i=t.lastPayloadCanceledAt,s=t.lastPayloadExpiredAt,c=t.allPayloadsExpired,u=t.isCanceled;return e.state!==exports.ProposalState.Created||n||u?e.data.votingMachineState!==exports.VotingMachineProposalState.NotCreated||n||u?!I(e.data.snapshotBlockHash).notZero||a||n||u?r||!a||n||u?a&&r&&e.state!==exports.ProposalState.Executed&&!n&&!u?e.data.votingMachineData.endTime>0?e.data.votingMachineData.endTime:e.data.creationTime+e.config.coolDownBeforeVotingStart:e.state===exports.ProposalState.Defeated?e.data.votingMachineData.endTime:e.state===exports.ProposalState.Executed?o:e.state===exports.ProposalState.Canceled?i>e.data.canceledAt?i:e.data.canceledAt:e.data.basicState===exports.BasicProposalState.Executed&&c?s:e.data.creationTime+e.timings.expirationTime:e.data.votingMachineData.startTime:e.data.votingActivationTime:e.data.creationTime+e.config.coolDownBeforeVotingStart:e.data.creationTime}(e),s=Q(e,e.data.votingMachineData.forVotes,e.data.votingMachineData.againstVotes),c=s.estimatedState,u=s.timestampForEstimatedState,d=z(e),p=new l.BigNumber(e.data.votingMachineData.forVotes).plus(e.data.votingMachineData.againstVotes),f=e.balances.map((function(e){return k(e.basicValue).toNumber()})).reduce((function(e,t){return e+t}),0),m=e.balances.map((function(e){return k(e.value).toNumber()})).reduce((function(e,t){return e+t}),0),h=e.balances,v=n+o<a?a:n+o,x=0===r?0:r;return{forPercent:p.gt(0)?new l.BigNumber(r).dividedBy(v).multipliedBy(100).toNumber():0,forVotes:r,againstPercent:p.gt(0)?new l.BigNumber(n).dividedBy(x>0?x:1).multipliedBy(100).toNumber():0,againstVotes:n,minQuorumVotes:a,requiredDiff:o,requiredForVotes:v,requiredAgainstVotes:x,stateTimestamp:i,estimatedState:c,timestampForEstimatedState:u,waitForState:d,votingPowerBasic:f,votingPower:m,votedPower:F(e.data.votingMachineData.votedInfo.votingPower,18).toNumber(),votingTokens:h}},exports.formatQuorum=R,exports.formatVotingMachineData=be,exports.getBlockNumberByTimestamp=function(e,t,r){return Z.apply(this,arguments)},exports.getBlocksForEvents=function(e,t,r,a){var n=r&&r>0&&r<e?r:a&&isFinite(a)&&a>t&&a<e?a+1:e>t+1023?t+1023:e;return{startBlock:a&&isFinite(a)&&a>t&&a<e&&a<n?a:t<e?t:e-1023,endBlock:n}},exports.getDetailedProposalsData=function(e,t,r,a){for(var n=[],o=function(){var r=e[i],o=t.find((function(e){return e.proposalData.id.toNumber()===r.id.toNumber()}))||t[i],s={id:r.id.toNumber(),votingDuration:+(null==o?void 0:o.voteConfig.votingDuration)||+r.proposalData.votingDuration,creationTime:+r.proposalData.creationTime,accessLevel:+r.proposalData.accessLevel,basicState:+r.proposalData.state,queuingTime:+r.proposalData.queuingTime,ipfsHash:r.proposalData.ipfsHash,initialPayloads:r.proposalData.payloads.map((function(e){return{id:e.payloadId,chainId:e.chain.toNumber(),payloadsController:e.payloadsController}})),snapshotBlockHash:r.proposalData.snapshotBlockHash,creator:r.proposalData.creator,canceledAt:r.proposalData.cancelTimestamp,votingActivationTime:r.proposalData.votingActivationTime,votingChainId:r.votingChainId.toNumber(),votingMachineData:be(r.id.toNumber(),o),prerender:!!a};n.push(s)},i=0;i<r.length;i++)o();return n},exports.getEstimatedState=Q,exports.getEventsBySteps=O,exports.getGovCoreConfigs=function(e,t){return K.apply(this,arguments)},exports.getLink=Ce,exports.getPayloadsCreated=function(e,t,r,a,n){return J.apply(this,arguments)},exports.getPayloadsExecuted=function(e,t,r,a,n){return ye.apply(this,arguments)},exports.getPayloadsQueued=function(e,t,r,a,n){return ve.apply(this,arguments)},exports.getProposalActivated=function(e,t,r){return ne.apply(this,arguments)},exports.getProposalActivatedOnVM=function(e,t,r){return se.apply(this,arguments)},exports.getProposalCreated=function(e,t,r){return te.apply(this,arguments)},exports.getProposalMetadata=function(e,t,r,a){return Be.apply(this,arguments)},exports.getProposalQueued=function(e,t,r){return fe.apply(this,arguments)},exports.getProposalState=function(e){var t=G({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),r=j(t),a=r.forVotes,n=r.againstVotes,o=r.quorumReached,i=r.normalizeRequiredDiff,s=r.isVotingEnded,c=r.isVotingFailed,u=r.isExpired,d=r.allPayloadsExecuted,p=r.isCanceled,l=r.isPayloadsExecuted;return!p&&t.proposalData.votingMachineState===exports.VotingMachineProposalState.NotCreated&&t.proposalData.basicState<=exports.BasicProposalState.Active?exports.ProposalState.Created:r.isVotingActive&&I(t.proposalData.snapshotBlockHash).notZero?exports.ProposalState.Active:s&&!p&&a>n+i&&o&&!d&&!u?exports.ProposalState.Succeed:c&&!p?exports.ProposalState.Defeated:p?exports.ProposalState.Canceled:l?exports.ProposalState.Executed:exports.ProposalState.Expired},exports.getProposalStepsAndAmounts=j,exports.getProposalVotingClosed=function(e,t,r){return de.apply(this,arguments)},exports.getVoters=function(e,t,r,a,n){return Ee.apply(this,arguments)},exports.getVotingMachineProposalState=function(e){var t=m().unix();return 0===e.votingMachineData.startTime?exports.VotingMachineProposalState.NotCreated:t<=e.votingMachineData.endTime?exports.VotingMachineProposalState.Active:0===e.votingMachineData.votingClosedAndSentBlockNumber?exports.VotingMachineProposalState.Finished:exports.VotingMachineProposalState.SentToGovernance},exports.getWaitForState=z,exports.govCoreConfig=C,exports.ipfsGateway="https://ipfs.io/ipfs",exports.normalize=function(e,t){return F(e,t).toString(10)},exports.normalizeBN=F,exports.normalizeVotes=q,exports.payloadsControllerChainIds=w,exports.payloadsControllerConfig=N,exports.updateVotingMachineData=function(e,t,r){var a=[];return r.forEach((function(r){var n=e.find((function(e){return(null==e?void 0:e.id)===r}));if(n){var o=t.find((function(e){return e.proposalData.id.toNumber()===n.id}))||t[0],i={id:n.id,votingDuration:+(null==o?void 0:o.voteConfig.votingDuration)||n.votingDuration,creationTime:n.creationTime,accessLevel:n.accessLevel,basicState:n.basicState,queuingTime:n.queuingTime,ipfsHash:n.ipfsHash,initialPayloads:n.initialPayloads,snapshotBlockHash:n.snapshotBlockHash,creator:n.creator,canceledAt:n.canceledAt,votingActivationTime:n.votingActivationTime,votingChainId:n.votingChainId,votingMachineData:be(n.id,o),prerender:n.prerender};a.push(i)}})),a},exports.valueToBigNumber=k,exports.votingMachineChainIds=V;
//# sourceMappingURL=aave-governance-ui-helpers.cjs.production.min.js.map
